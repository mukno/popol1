<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.mapper.BoardMapper">

	<insert id="writeAction">
	
		<selectKey keyProperty="board_group" order="BEFORE" resultType="int">
			select max(board_group)+1 from board
		</selectKey> 
		insert into board(bno,title,writer,updatedate,board_content,board_group,userId) 
		values(seq_board.nextval,#{title},#{writer},sysdate,#{board_content},#{board_group},#{userId})
		
	
	</insert>
	
	
	<select id="getList" resultType="com.spring.domain.BoardVO">
	
		select *from board order by board_group DESC
	</select>
	
	<select id="boardShow" resultType="com.spring.domain.BoardVO">
		select *from board where bno=#{bno}
		
	</select>
	
	<update id="addhits">
		update board set hits=hits+1 where bno=#{bno}
	
	</update>
	
	<update id="updateAction">
		update board set title=#{title},board_content=#{board_content} where bno=#{bno}
	
	</update>

	<delete id="deleteAction">
		delete from board where bno=#{bno}
	
	</delete>
	
	
	<insert id="commentAction">
		<selectKey keyProperty="comment_num" order="BEFORE" resultType="int">
			select comment_seq.nextval from dual
		</selectKey>
	
		insert into board_comment values(#{comment_num},#{comment_board},#{comment_id},sysdate,#{comment_content},#{comment_name})
	
	
	</insert>
	
	<select id="getComment" resultType="com.spring.domain.CommentVO">
		select *from board_comment where comment_board=#{bno} order by comment_num asc
	
	
	</select>

	<update id="addreplyCnt">
		update board set replyCnt=replyCnt+1 where bno=#{bno}
		
		
	</update>


</mapper>